# 📅 更新日志 

本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/) 规范。

## [1.2.0] - 开发中

### 🚀 新功能
- ✅ **全局路径管理系统** - 统一的路径存储和管理机制
- ✅ **路径合并功能** - 支持将新路径合并到现有处理队列
- ✅ **实时路径显示** - 可随时查看当前处理的文件列表
- ✅ **交互式路径输入增强** - 功能2现在可以正确合并路径到处理队列
- 🔄 **清除现有路径功能** - 开发中
- 🔄 **FFmpeg 静态库封装** - 开发中
- 🔄 **图形用户界面 (GUI)** - 规划中

### 🔧 技术改进
- ✅ **统一的全局变量管理** - 使用 `g_global_paths` 和 `g_global_path_count`
- ✅ **模块化函数设计** - `merge_paths_to_global()` 统一路径合并逻辑
- ✅ **改进的内存管理** - 完善的内存分配和释放机制
- ✅ **增强的错误处理** - 更详细的错误信息和调试输出
- 🔄 **代码结构优化** - 持续改进中
- 🔄 **内置 FFmpeg 静态库** - 持续改进中

### 🎯 核心架构更新
- ✅ **全局路径架构** - 实现 `main.cpp` 中的全局路径管理系统
- ✅ **函数接口统一** - `function2()` 现在无需参数，直接操作全局变量
- ✅ **路径合并逻辑** - 支持命令行参数和交互输入的路径合并
- ✅ **内存安全改进** - 使用 `_strdup()` 和安全的内存释放

### 📚 文档更新
- ✅ **更新 README** - 反映新的全局路径管理功能
- ✅ **完善代码注释** - 添加详细的功能说明
- 🔄 **API 文档** - 持续完善中
- 🔄 **使用教程** - 规划中

## [1.1.0] - 2025-10-22

### 新增
- ✨ 添加交互式文件路径输入功能 (function2)
- ✨ 实现文件拖拽支持
- ✨ 添加加载动画效果

### 改进
- ⚡ 优化文件路径处理性能
- 🎨 改进用户界面和提示信息
- 🔧 完善错误处理机制

### 修复
- 🐛 修复输入缓冲区清理问题
- 🐛 修复中文路径编码问题
- 🐛 修复内存泄漏问题

## [1.0.0] - 2025-10-24

### 首个稳定版本
- 🎉 实现基本文件格式转换功能
- 🎉 支持批量文件处理
- 🎉 集成 FFmpeg 转换引擎
- 🎉 提供命令行参数支持

### 功能特性
- 支持多种图片格式转换
- 智能路径解析和处理
- UTF-8 编码支持
- 完整的错误处理

---

## 🔄 开发进度说明

### ✅ 已完成 (1.2.0)
- **全局路径管理系统** - 路径现在可以跨功能共享和持久化
- **路径合并功能** - 功能2输入的路径会合并到现有队列，而不是替换
- **实时状态显示** - 菜单显示当前文件数量，可随时查看路径列表
- **统一内存管理** - 改进的内存分配策略，减少泄漏风险

### 🔄 进行中 (1.2.0)
- **路径清除功能** - 允许用户清除当前路径列表
- **独立版本封装** - 集成 FFmpeg 静态库
- **错误处理增强** - 更友好的用户提示

### 📋 待规划
- **图形界面开发**
- **配置文件支持**
- **日志记录系统**
- **更多格式支持**

## 🎯 当前版本亮点

1.2.0 版本的核心改进是**统一的路径管理系统**，解决了之前版本中路径数据无法在功能间共享的问题。现在：

- ✅ 命令行参数自动合并到全局路径
- ✅ 功能2输入的路径会添加到现有队列
- ✅ 实时显示当前处理的文件数量
- ✅ 支持查看完整的路径列表
- ✅ 改进的内存管理和错误处理

这使得工具更加实用和用户友好，为后续功能扩展奠定了坚实基础。